#@TYPE: Machine
#@NAME: imx6ull-versa512
#@SOC : i.MX6ULL
#@DESCRIPTION: Machine configuration for system with imx6ull-versa som with 256MB/512MB/1024MB DDR.

MACHINEOVERRIDES =. "mx6:mx6ul:mx6ull:"

include conf/machine/include/calixto-imx-base.inc
include conf/machine/include/arm/armv7a/tune-cortexa7.inc

IMAGE_INSTALL:append = "imx6ull-versa-flasher"

MACHINE_FEATURES += "wifi usbgadget usbhost vfat alsa"
MACHINE_EXTRA_RRECOMMENDS = "kernel-modules kernel-devicetree"

KERNEL_DEVICETREE = "imx6ull-calixto-versa.dtb"
KERNEL_IMAGETYPE = "zImage"

MACHINE_ESSENTIAL_EXTRA_RDEPENDS += "kernel-image kernel-devicetree"
PREFERRED_PROVIDER_virtual/kernel ?= "linux-calixto-nxp"
PREFERRED_PROVIDER_virtual/bootloader = "u-boot-calixto-nxp"
PREFERRED_PROVIDER_u-boot = "u-boot-calixto-nxp"

UBOOT_MAKE_TARGET = "u-boot.imx"
UBOOT_SUFFIX = "imx"

UBOOT_CONFIG ??= "sd ${@bb.utils.contains('MACHINE_FEATURES', 'optee', 'sd-optee', '', d)}"
UBOOT_CONFIG[sd] = "imx6ull_versa_512_sd_uboot_defconfig,sdcard"

# UBOOT_MACHINE = "imx6ull_versa_512_sd_uboot_defconfig"
